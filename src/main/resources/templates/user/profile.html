<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>회원 프로필</title>
</head>
<body>
<h2>회원 프로필</h2>

<!-- 프로필 정보 출력 -->
<div th:if="${user != null}">
    <p><strong>이름:</strong> <span th:text="${user.name}"></span></p>
    <p><strong>이메일:</strong> <span th:text="${user.email}"></span></p>

    <!-- 로그인한 사용자가 본인만 수정할 수 있는 폼 -->
    <div th:if="${user != null and loginUser != null and user.id == loginUser.id}">
        <h3>프로필 수정</h3>
        <form th:action="@{/users/{userId}/form(userId=${user.id})}" method="post">
            <label for="name">이름:</label>
            <input type="text" id="name" name="name" th:value="${user.name}" required /><br>

            <label for="email">이메일:</label>
            <input type="email" id="email" name="email" th:value="${user.email}" required /><br>

            <label for="password">비밀번호:</label>
            <input type="password" id="password" name="password" required /><br>

            <button type="submit">수정하기</button>
        </form>
    </div>

</div>

<!-- 다른 사용자의 프로필이거나 로그인하지 않은 경우 표시 -->
<div th:if="${user != null and loginUser != null and user.id != loginUser.id}">
    <p>이 페이지는 다른 사용자의 프로필입니다. 본인의 프로필만 수정할 수 있습니다.</p>
</div>

<!-- 로그인하지 않은 경우 -->
<div th:if="${loginUser == null}">
    <p>로그인 후에 본인의 프로필을 수정할 수 있습니다. <a href="/login">로그인</a></p>
</div>

<a href="/users">회원 목록으로 돌아가기</a>
</body>
</html>